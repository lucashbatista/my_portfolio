<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <!--Title of the project-->
        <title>Retail Store Inventory Forecasting Dataset</title>
        <h2>Retail Store Inventory Forecasting Dataset</h2>
        <p>Working in progress</p>

        <h3>Packages needed for this project</h3>
        <code>
            library(plyr)<br>
            library(dtplyr)<br>
            library(tidyr)<br>
            library(lsr)<br>
            library(ggplot2)<br>
            library(stats)<br>
            #Load packages<br>
            library(tidyverse) # for general data wrangling and plotting <br>
            library(forecast) <br>
            library(lubridate) # for working with dates
        </code>
        <h3>Read files.</h3>
        <code>
            df <- read_csv("retail_store_inventory.csv")
        </code>
        
        <h3># FILTER CATEGORY=TOYS | PRODUCT.ID = P0002. SELECT Date, Demand.Forecast</h3>

        <code>
            new_df <- 
                df %>% filter(Category == "Toys" & Product.ID == "P0002") %>% 
                select(Date, Demand.Forecast)
        </code>

        <h3># EXTRACT MONTH AND YEAR TO CREATE A NEW COLUMN</h3>
        <h4>#make sure that lubridate is installed</h4>
        <code>
            new_df$month <- format(as.Date(new_df$Date, format = "%Y%d%m"), "%m")
            new_df$year <- format(as.Date(new_df$Date, format = "%Y%d%m"), "%Y")
        </code>
        <h4># EXTRACT MONTH AND YEAR TOGETHER</h4>
        <code>
            new_df$month_year <- format(as.Date(new_df$Date, format = "%Y%d%m"), "%m%Y")
        </code>
        <h4># AGGREGATE BY MONTH/YEAR</h4>
        <code>
            <p>Aggregate Year and Month, and take out the Mean from date</p>

            ts_prep <- 
            aggregate(new_df$Demand.Forecast, by = list(month= format(new_df$Date, "%Y-%m")), FUN = mean) #rename column "x" with values Demand.Forecast

        </code>

        <h3># TIME SERIES AND FORECASTING. ARIMA</h3>
        <h4># Plot Demand.Forecast</h4>
        <code>
            plot(ts_prep, main = "Graph without forecasting", col.main = "Darkgreen")
        </code>

        <h4># Create Time-Series</h4>
        <code>
            time_series <- ts(ts_prep$Demand.Forecast, 
                  start = c(2022, 1), 
                  end = c(2023, 12), 
                  frequency = 12 )
        </code>

        <h4># Plot Time-Series</h4>
        <code>
            plot(time_series)
            acf(time_series)
        </code>

        <h3># Arima Model</h3>
        <code>
            arima <- select(ts_prep, Demand.Forecast)
            fit <- auto.arima(arima)
            forecast_values <- forecast(fit, 1)
            print(forecast_values)
            plot(forecast_values, main = "Graph with forecast", col.main = "darkgreen")
        </code>


    </body>
</html>